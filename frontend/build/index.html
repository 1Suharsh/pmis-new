<!doctype html><html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>PMIS AI Internship Finder</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:Inter,Arial,Helvetica,sans-serif;background:#f3f4f6;margin:0;padding:0}
    .nav{background:#111827;color:white;padding:16px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;background:linear-gradient(135deg,#2563eb,#06b6d4);border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .container{max-width:1100px;margin:32px auto;padding:0 20px}
    .hero{display:flex;gap:20px;align-items:center}
    .hero-left{flex:1}
    .hero-right{width:380px}
    .card{background:white;padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .search{display:flex;gap:8px}
    input{padding:12px;border-radius:8px;border:1px solid #e5e7eb;flex:1}
    button{background:#2563eb;color:white;padding:10px 14px;border-radius:8px;border:none}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:14px;margin-top:18px}
    .job{background:white;padding:14px;border-radius:10px;border:1px solid #e6eef9}
    .muted{color:#6b7280;font-size:13px}
    footer{padding:28px;text-align:center;color:#6b7280}
  </style>
</head>
<body>
  <div class="nav"><div class="brand"><div class="logo">PM</div><div><strong>PMIS AI Internship Finder</strong><div style="font-size:12px;color:#9ca3af">AI-powered recommendations for PM Internship Scheme</div></div></div><div>Team: Innovators Squad</div></div>
  <div class="container">
    <div class="hero">
      <div class="hero-left">
        <h1 style="margin:0">Find internships tailored to your skills</h1>
        <p class="muted">Search by skills, interests, or keywords — powered by AI recommendations.</p>
        <div class="card" style="margin-top:16px">
          <div class="search">
            <input id="q" placeholder="Enter skills e.g. Python, ML, React" />
            <button onclick="search()">Find Internships</button>
          </div>
          <div id="status" style="margin-top:12px;color:#374151;font-size:13px">Try: Python, Machine Learning</div>
        </div>
      </div>
      <div class="hero-right">
        <div class="card"><h3 style="margin-top:0">How it works</h3><p class="muted">We embed internship descriptions & your query using Sentence-BERT and perform similarity search for personalized matches.</p></div>
      </div>
    </div>
    <div id="results" class="grid" style="margin-top:22px"></div>
  </div>
  <footer>PM Internship AI Recommendation Engine — Smart India Hackathon 2025</footer>
<script>
const apiBase = '/api';
async function search(){
  const q = document.getElementById('q').value || 'Python';
  document.getElementById('status').innerText = 'Searching...';
  try{
    const resp = await fetch(apiBase + '/internships/recommend', {method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify({query_text:q})});
    const data = await resp.json();
    const list = data.recommendations || [];
    render(list);
    document.getElementById('status').innerText = `Found ${list.length} recommendations`;
  }catch(e){document.getElementById('status').innerText = 'Search failed (backend not running)'; console.error(e)}
}
function render(list){
  const out = document.getElementById('results'); out.innerHTML='';
  if(!list.length){ out.innerHTML = '<div class="card">No recommendations found</div>'; return; }
  list.forEach(item => {
    const div = document.createElement('div'); div.className='job';
    div.innerHTML = `<h3 style="margin:0">${item.title}</h3><div class="muted">${item.company} • ${item.location}</div><p class="muted">${item.description}</p><p style="margin:6px 0"><strong>Skills:</strong> ${item.required_skills}</p><div style="display:flex;justify-content:space-between;align-items:center"><div class="muted">Score: ${Math.round((item.score||0)*100)}%</div><div><button onclick="apply(${item.id})" style="background:#10b981;color:white;padding:8px;border-radius:8px;border:none">Apply</button></div></div>`;
    out.appendChild(div);
  });
}
async function apply(id){
  try{ const r = await fetch('/api/internships/'+id+'/apply',{method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify({user_id:1,cover_letter:'Excited to apply'})}); const j = await r.json(); alert('Applied: '+ JSON.stringify(j)); }catch(e){alert('Apply failed')}
}
// run initial search
search();
</script>
</body>
</html>
